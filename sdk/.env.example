# Clara Agent Runner - Environment Configuration
# Copy this file to .env and configure with your actual values

# ==========================================
# Server Configuration
# ==========================================
PORT=3000
NODE_ENV=development
HOST=0.0.0.0
BASE_URL=http://localhost:3000

# ==========================================
# Database Configuration
# ==========================================
# PostgreSQL connection string
DATABASE_URL=postgresql://clara:clara123@localhost:5432/clara_workflows

# Connection pool settings
DB_POOL_MIN=2
DB_POOL_MAX=10

# Enable SSL for database connection (set to 'true' for production)
DB_SSL=false

# ==========================================
# External Services
# ==========================================
# These URLs connect to other Clara services for workflow nodes

# ComfyUI - AI Image Generation
COMFYUI_URL=http://localhost:8188
COMFYUI_ENABLED=true

# Python Backend - Speech/Audio Processing
PYTHON_BACKEND_URL=http://localhost:5001
PYTHON_BACKEND_ENABLED=true

# Clara Assistant - AI Agent Service
CLARA_ASSISTANT_URL=http://localhost:8069
CLARA_ASSISTANT_ENABLED=true

# Ollama - Local LLM Server
OLLAMA_URL=http://localhost:11434
OLLAMA_ENABLED=true

# ==========================================
# API Keys (for AI Services)
# ==========================================
# OpenAI API Key (for LLM, Whisper, etc.)
OPENAI_API_KEY=sk-...

# Anthropic API Key (for Claude models)
ANTHROPIC_API_KEY=sk-ant-...

# OpenRouter API Key (for multiple model access)
OPENROUTER_API_KEY=sk-or-...

# ==========================================
# Workflow Execution Limits
# ==========================================
# Maximum time for workflow execution (milliseconds)
MAX_EXECUTION_TIME=300000

# Maximum number of concurrent workflow executions
MAX_CONCURRENT_EXECUTIONS=10

# Maximum input size (bytes) - default 10MB
MAX_INPUT_SIZE=10485760

# Maximum output size (bytes) - default 10MB
MAX_OUTPUT_SIZE=10485760

# Enable execution logging
ENABLE_EXECUTION_LOGGING=true

# ==========================================
# Rate Limiting
# ==========================================
# Enable rate limiting
RATE_LIMIT_ENABLED=true

# Rate limit window (milliseconds) - default 1 hour
RATE_LIMIT_WINDOW_MS=3600000

# Maximum requests per window
RATE_LIMIT_MAX_REQUESTS=100

# ==========================================
# Security
# ==========================================
# Allowed CORS origins (comma-separated, use '*' for all)
CORS_ORIGINS=*

# Trust proxy headers (set to 'true' if behind reverse proxy)
TRUST_PROXY=false

# ==========================================
# Logging
# ==========================================
# Log level: 'error', 'warn', 'info', 'debug'
LOG_LEVEL=info

# Pretty print logs (useful for development)
LOG_PRETTY=false

# ==========================================
# Maintenance & Cleanup
# ==========================================
# Automatically cleanup old execution records
CLEANUP_OLD_EXECUTIONS=false

# Number of days to retain execution records
EXECUTION_RETENTION_DAYS=30

# ==========================================
# Docker-Specific Configuration
# ==========================================
# When running in Docker, use container names as hosts
# Uncomment these when running in docker-compose:

# DATABASE_URL=postgresql://clara:clara123@clara_postgres:5432/clara_workflows
# COMFYUI_URL=http://clara_comfyui:8188
# PYTHON_BACKEND_URL=http://clara_python:5000
